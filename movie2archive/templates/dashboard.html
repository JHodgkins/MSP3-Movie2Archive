{% extends "main.html" %}
{% block content %}
    <div class="row">
        <div class="col-md-6">
            <h1 class="">MOVIE2ARCHIVE Dashboard</h2>
            <h2 class="">Admin actions</h2>
            <p>Manage the site here.</p>
            {% if current_user.username == "admin" %}
                <ul>
                    <li><a class="nav-link" href="{{ url_for('dashboard') }}">Dashboard</a></li>
                    <li><a href="{{ url_for('add_media_cat') }}">Add a Media type category</a></li>
                    <li>Add a location type category</li>
                </ul>

            <h3>Media Types</h3>
            <ul class="list-group">
              {% for media_type in media_types %}
                  <li class="list-group-item d-flex justify-content-between align-items-center">{{ media_type.type }}
                    <div class="btn-group">
                      <a href="{{ url_for('edit_media_cat', media_type_id=media_type.id) }}" class="btn btn-primary mx-1">Edit</a>
                      <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#delete_modal-{{ media_type.id }}">Delete</button>
                    </div>
                  </li>
                  <!-- Modal -->
                  <div class="modal fade" id="delete_modal-{{ media_type.id }}" tabindex="-1" aria-labelledby="ModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h2 class="modal-title" id="ModalLabel">Confirm deletion of media type ({{ media_type.type }})</h2>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <p>Please read:<br>
                          You are about to delete Media type <strong>{{ media_type.type }}</strong> from the database.</p>
                          <p>If any user has this media type assigned within their collection, those collection titles will be deleted also.</p>
                          <p><strong>This action is permanant and cannot be reversed</strong>.</p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                          <form action="{{ url_for('delete_media_cat', media_type_id=media_type.id) }}" method="POST">
                            <input class="btn btn-danger" type="submit" value="I understand, Delete now">
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- end modal -->
                {% endfor %}
                </ul>
            <hr>
            <a href="{{ url_for('add_media_cat') }}">Add a Media type category</a>
            <hr>

            <h3>All location types</h3>
            <ul>
                <li><a href="{{ url_for('add_media_cat') }}">Add a Media type category</a></li>
                <li>Add a location type category</li>
            </ul>
        </div>
        {% endif %}
    </div>
{% endblock content %}